---
source_file: manuals/odbchat_cli_quickstart.md
dataset_name: marineheatwave
collection: mhw
doc_type: cli_quickstart
title: ODBchat CLI — 海洋熱浪快速繪圖指令
lang: zh_TW
issuer: "ODB Project (internal)"
description: "逐步示範如何啟動 odbchat_cli、連線、下 /mhw 指令並立即繪出海洋熱浪或海溫距平地圖/時序圖的速查表。"
tags: ["odbchat_cli", "Marine Heatwaves Tool", "Quick Start", "Plot command"]
related_to:
  - doc_id: ["e92105f573812706c700e35c0d1eee44e62ee8cc"]
  - collection: "mhw"
depends_on:
  - manuals/odb_mhw_openapi.yml
purpose: "回答「不用寫程式如何用 CLI 畫海洋熱浪/海溫圖？」時，提供最短步驟與參數範例。"
faq: ["如何不寫程式也能畫出海洋熱浪分佈", "odbchat_cli 要輸入哪些參數", "用 CLI 畫海溫距平地圖"]
content: |
  ## 為什麼使用 ODBchat CLI

  - 不需撰寫 Python 腳本，只要一行指令就能呼叫 ODB MHW API 並繪圖。
  - CLI 內建指令補完、歷史重播、非阻塞視窗，適合快速試算不同區域/期間。

  ## 快速步驟

  1. **啟動 CLI**
     ```bash
     cd proj/odbchat
     python odbchat_cli.py
     ```
  2. **連線（第一次使用）**
     ```
     /server connect http://127.0.0.1:8045/mcp
     ```
     （若已設定預設伺服器，可略過這步。）
  3. **輸入 `/mhw` 指令繪圖** — 所有參數都以 `--bbox`/`--plot` 等選項帶入；沒有 `--lat0`/`--lon0` 這種寫法。
  4. **視窗顯示後可馬上輸入下一個指令**，或加 `--outfile` 直接存成 PNG。

  ## 地圖範例：海洋熱浪等級

  ```text
  /mhw --bbox 118,20,123,25 --fields level --plot map --plot-field level --start 2025-05 --map-method cartopy
  ```

  - `--bbox lon0,lat0,lon1,lat1`：必填；範圍以十進位度數表示。
  - `--fields level`：要求 API 回傳海洋熱浪等級。
  - `--plot map --plot-field level`：繪製等級分佈圖（會自動套用等級色盤與圖例）。
  - `--start 2025-05`：單月地圖。若同時指定 `--end` 則會逐月繪製多張圖。
  - `--map-method`：未指定則依序嘗試 cartopy → basemap → plain。

  ## 時序範例：海溫 + 距平

  ```text
  /mhw --bbox 119,20,122,23 --fields sst,sst_anomaly --plot series --plot-field sst,sst_anomaly --periods "20100101-20191231,20200101-20250601"
  ```

  - 以 `--periods` 定義多段時間（CLI 會逐段抓取並疊成雙子圖）。
  - 若未指定 `--periods`，預設取最近 12 個完整月份。
  - `--plot-field` 可列出多個欄位，依序對應上下子圖。

  ## 常用參數對照

  | 參數 | 說明 |
  | ---- | ---- |
  | `--bbox lon0,lat0,lon1,lat1` | 查詢範圍；接受跨 0°/±180°，CLI 會自動分割 |
  | `--fields` | API 欄位（`sst`, `sst_anomaly`, `level`, `td`…）|
  | `--plot` | `series`（時序）、`map`（地圖）、`month`（多期同圖）|
  | `--plot-field` | 要實際繪製的欄位，可多個 |
  | `--start / --end` | YYYY-MM 或 YYYY-MM-DD；地圖模式常用 |
  | `--periods` | 多段期間字串。範例：`"201001-201912,202001-202406"` |
  | `--outfile path.png` | 直接輸出成檔案 |
  | `--map-method` | cartopy / basemap / plain |
  | `--cmap`, `--vmin`, `--vmax` | 連續變量顏色設定（如 `sst_anomaly`）|

  ## 互動小技巧

  - `/` 開頭的指令會記錄在歷史：按 `↑/↓` 可循環上一筆、下一筆。
  - 游標移動與刪字已修正，可放心使用 `←/→` 微調。
  - 圖窗為非阻塞：畫完圖後 CLI 立即可輸入下一個 `/mhw`。

  ## 常見疑問

  - **Q：我只會 GUI，可以用 CLI 嗎？**  
    A：可以。只要照上面例子貼上 `/mhw --bbox ...` 就會自動呼叫伺服器並繪圖。
  - **Q：要同時看 sst 和 level？**  
    A：在 `--fields` 與 `--plot-field` 同時列出，例如 `--fields sst,level --plot-field sst,level`。
  - **Q：指令太長記不住？**  
    A：可以先輸入 `/mhw` 再按 `Tab` 觸發 CLI 補完，或把常用指令存成 shell alias。
